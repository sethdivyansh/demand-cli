(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{478:(e,t,a)=>{"use strict";a.d(t,{Transactions:()=>eI});var n=a(5155),s=a(2115),l=a(3464),r=a(1320),i=a(6671),o=a(9434),c=a(6127),d=a(6695),u=a(285),m=a(6268),x=a(5127);let g={sortOrders:[{label:"Asc",value:"asc"},{label:"Desc",value:"desc"}]};function h(e){let{column:t,withBorder:a=!1}=e,n=t.getIsPinned(),s="left"===n&&t.getIsLastColumn("left"),l="right"===n&&t.getIsFirstColumn("right");return{boxShadow:a?s?"-4px 0 4px -4px hsl(var(--border)) inset":l?"4px 0 4px -4px hsl(var(--border)) inset":void 0:void 0,left:"left"===n?"".concat(t.getStart("left"),"px"):void 0,right:"right"===n?"".concat(t.getAfter("right"),"px"):void 0,opacity:n?.97:1,position:n?"sticky":"relative",background:"hsl(var(--background))",width:t.getSize(),zIndex:+!!n}}var f=a(2278),p=a(2767),b=a(9409),v=a(3096);function j(e){let{table:t,pageSizeOptions:a=[10,20,30,40,50],className:s,...l}=e;return(0,n.jsxs)("div",{className:(0,o.cn)("flex w-full flex-col-reverse items-center justify-between gap-4 overflow-auto p-1 sm:flex-row sm:gap-8",s),...l,children:[(0,n.jsx)("div",{className:"text-muted-foreground flex-1 text-sm whitespace-nowrap",children:t.getFilteredSelectedRowModel().rows.length>0?(0,n.jsxs)(n.Fragment,{children:[t.getFilteredSelectedRowModel().rows.length," of"," ",t.getFilteredRowModel().rows.length," row(s) selected."]}):(0,n.jsxs)(n.Fragment,{children:[t.getFilteredRowModel().rows.length," row(s) total."]})}),(0,n.jsxs)("div",{className:"flex flex-col-reverse items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium whitespace-nowrap",children:"Rows per page"}),(0,n.jsxs)(b.l6,{value:"".concat(t.getState().pagination.pageSize),onValueChange:e=>{t.setPageSize(Number(e))},children:[(0,n.jsx)(b.bq,{className:"h-8 w-[4.5rem] [&[data-size]]:h-8",children:(0,n.jsx)(b.yv,{placeholder:t.getState().pagination.pageSize})}),(0,n.jsx)(b.gC,{side:"top",children:a.map(e=>(0,n.jsx)(b.eb,{value:"".concat(e),children:e},e))})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(u.$,{"aria-label":"Go to first page",variant:"outline",size:"icon",className:"hidden size-8 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:(0,n.jsx)(f.A,{})}),(0,n.jsx)(u.$,{"aria-label":"Go to previous page",variant:t.getCanPreviousPage()?"default":"outline",size:"icon",className:"size-8",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:(0,n.jsx)(v.YJP,{})}),(0,n.jsx)(u.$,{"aria-label":"Go to next page",variant:t.getCanNextPage()?"default":"outline",size:"icon",className:"size-8",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:(0,n.jsx)(v.vKP,{})}),(0,n.jsx)(u.$,{"aria-label":"Go to last page",variant:"outline",size:"icon",className:"hidden size-8 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:(0,n.jsx)(p.A,{})})]})]})]})}function w(e){var t;let{table:a,actionBar:s,children:l,className:r,...i}=e;return(0,n.jsxs)("div",{className:(0,o.cn)("flex w-full flex-col gap-2.5 overflow-auto",r),...i,children:[l,(0,n.jsx)("div",{className:"overflow-hidden rounded-md border",children:(0,n.jsxs)(x.Table,{children:[(0,n.jsx)(x.TableHeader,{children:a.getHeaderGroups().map(e=>(0,n.jsx)(x.TableRow,{children:e.headers.map(e=>(0,n.jsx)(x.TableHead,{colSpan:e.colSpan,style:{...h({column:e.column})},className:"text-muted-foreground",children:e.isPlaceholder?null:(0,m.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(x.TableBody,{children:(null==(t=a.getRowModel().rows)?void 0:t.length)?a.getRowModel().rows.map(e=>(0,n.jsx)(x.TableRow,{"data-state":e.getIsSelected()&&"selected",className:(0,o.cn)("hover:ring-primary hover:ring-1"),children:e.getVisibleCells().map(e=>(0,n.jsx)(x.TableCell,{style:{...h({column:e.column})},children:(0,m.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(x.TableRow,{children:(0,n.jsx)(x.TableCell,{colSpan:a.getAllColumns().length,className:"h-24 text-center",children:"No results."})})})]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,n.jsx)(j,{table:a}),s&&a.getFilteredSelectedRowModel().rows.length>0&&s]})]})}var y=a(9145),N=a(8922),S=a(2525),C=a(6126),k=a(4636),R=a(5143),D=a(1206),z=a(402),F=a(8266),A=a(9708);function T(e,t){let{checkForDefaultPrevented:a=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){if(null==e||e(n),!1===a||!n.defaultPrevented)return null==t?void 0:t(n)}}function I(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function P(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return s.useCallback(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{let a=!1,n=t.map(t=>{let n=I(t,e);return a||"function"!=typeof n||(a=!0),n});if(a)return()=>{for(let e=0;e<n.length;e++){let a=n[e];"function"==typeof a?a():I(t[e],null)}}}}(...t),t)}var E=a(7650);let M={vertical:{modifiers:[D.FN,D.gj],strategy:z._G,collisionDetection:R.fp},horizontal:{modifiers:[D.dU,D.gj],strategy:z.m$,collisionDetection:R.fp},mixed:{modifiers:[D.gj],strategy:void 0,collisionDetection:R.y$}},L="Sortable",O="SortableContent",_="SortableItem",B="SortableItemHandle",K="SortableOverlay",W={[L]:"`".concat(L,"` components must be within `").concat(L,"`"),[O]:"`".concat(O,"` must be within `").concat(L,"`"),[_]:"`".concat(_,"` must be within `").concat(O,"`"),[B]:"`".concat(B,"` must be within `").concat(_,"`"),[K]:"`".concat(K,"` must be within `").concat(L,"`")},$=s.createContext(null);function J(e){let t=s.useContext($);if(!t)throw Error(W[e]);return t}function Z(e){let{value:t,onValueChange:a,collisionDetection:l,modifiers:r,strategy:i,onMove:o,orientation:c="vertical",flatCursor:d=!1,getItemValue:u,accessibility:m,...x}=e,g=s.useId(),[h,f]=s.useState(null),p=(0,R.FR)((0,R.MS)(R.cA),(0,R.MS)(R.IG),(0,R.MS)(R.uN,{coordinateGetter:z.JR})),b=s.useMemo(()=>M[c],[c]),v=s.useCallback(e=>{if("object"==typeof e&&!u)throw Error("getItemValue is required when using array of objects.");return u?u(e):e},[u]),j=s.useMemo(()=>t.map(e=>v(e)),[t,v]),w=s.useCallback(e=>{let{active:n,over:s}=e;if(s&&n.id!==(null==s?void 0:s.id)){let l=t.findIndex(e=>v(e)===n.id),r=t.findIndex(e=>v(e)===s.id);o?o({...e,activeIndex:l,overIndex:r}):null==a||a((0,z.be)(t,l,r))}f(null)},[t,a,o,v]),y=s.useMemo(()=>({onDragStart(e){var a;let{active:n}=e,s=n.id.toString();return'Grabbed sortable item "'.concat(s,'". Current position is ').concat((null==(a=n.data.current)?void 0:a.sortable.index)+1," of ").concat(t.length,". Use arrow keys to move, space to drop.")},onDragOver(e){let{active:a,over:n}=e;if(n){var s,l,r,i;let e=null!=(r=null==(s=n.data.current)?void 0:s.sortable.index)?r:0,o=null!=(i=null==(l=a.data.current)?void 0:l.sortable.index)?i:0,c=a.id.toString();return'Sortable item "'.concat(c,'" moved ').concat(e>o?"down":"up"," to position ").concat(e+1," of ").concat(t.length,".")}return"Sortable item is no longer over a droppable area. Press escape to cancel."},onDragEnd(e){let{active:a,over:n}=e,s=a.id.toString();if(n){var l,r;let e=null!=(r=null==(l=n.data.current)?void 0:l.sortable.index)?r:0;return'Sortable item "'.concat(s,'" dropped at position ').concat(e+1," of ").concat(t.length,".")}return'Sortable item "'.concat(s,'" dropped. No changes were made.')},onDragCancel(e){var a,n;let{active:s}=e,l=null!=(n=null==(a=s.data.current)?void 0:a.sortable.index)?n:0,r=s.id.toString();return'Sorting cancelled. Sortable item "'.concat(r,'" returned to position ').concat(l+1," of ").concat(t.length,".")},onDragMove(e){let{active:a,over:n}=e;if(n){var s,l,r,i;let e=null!=(r=null==(s=n.data.current)?void 0:s.sortable.index)?r:0,o=null!=(i=null==(l=a.data.current)?void 0:l.sortable.index)?i:0,c=a.id.toString();return'Sortable item "'.concat(c,'" is moving ').concat(e>o?"down":"up"," to position ").concat(e+1," of ").concat(t.length,".")}return"Sortable item is no longer over a droppable area. Press escape to cancel."}}),[t]),N=s.useMemo(()=>({draggable:"\n        To pick up a sortable item, press space or enter.\n        While dragging, use the ".concat("vertical"===c?"up and down":"horizontal"===c?"left and right":"arrow"," keys to move the item.\n        Press space or enter again to drop the item in its new position, or press escape to cancel.\n      ")}),[c]),S=s.useMemo(()=>({id:g,items:j,modifiers:null!=r?r:b.modifiers,strategy:null!=i?i:b.strategy,activeId:h,setActiveId:f,getItemValue:v,flatCursor:d}),[g,j,r,i,b.modifiers,b.strategy,h,v,d]);return(0,n.jsx)($.Provider,{value:S,children:(0,n.jsx)(R.Mp,{collisionDetection:null!=l?l:b.collisionDetection,modifiers:null!=r?r:b.modifiers,sensors:p,...x,id:g,onDragStart:T(x.onDragStart,e=>{let{active:t}=e;return f(t.id)}),onDragEnd:T(x.onDragEnd,w),onDragCancel:T(x.onDragCancel,()=>f(null)),accessibility:{announcements:y,screenReaderInstructions:N,...m}})})}$.displayName=L;let V=s.createContext(!1);V.displayName=O;let H=s.forwardRef((e,t)=>{let{strategy:a,asChild:s,withoutSlot:l,children:r,...i}=e,o=J(O),c=s?A.DX:"div";return(0,n.jsx)(V.Provider,{value:!0,children:(0,n.jsx)(z.gB,{items:o.items,strategy:null!=a?a:o.strategy,children:l?r:(0,n.jsx)(c,{...i,ref:t,children:r})})})});H.displayName=O;let G=s.createContext(null);G.displayName=_;let U=s.forwardRef((e,t)=>{let{value:a,style:l,asHandle:r,asChild:i,disabled:c,className:d,...u}=e,m=s.useContext(V),x=s.useContext(X);if(!m&&!x)throw Error(W[_]);if(""===a)throw Error("`".concat(_,"` value cannot be an empty string"));let g=J(_),h=s.useId(),{attributes:f,listeners:p,setNodeRef:b,setActivatorNodeRef:v,transform:j,transition:w,isDragging:y}=(0,z.gl)({id:a,disabled:c}),N=P(t,e=>{!c&&(b(e),r&&v(e))}),S=s.useMemo(()=>({transform:F.Ks.Translate.toString(j),transition:w,...l}),[j,w,l]),C=s.useMemo(()=>({id:h,attributes:f,listeners:p,setActivatorNodeRef:v,isDragging:y,disabled:c}),[h,f,p,v,y,c]),k=i?A.DX:"div";return(0,n.jsx)(G.Provider,{value:C,children:(0,n.jsx)(k,{id:h,"data-dragging":y?"":void 0,...u,...r?f:{},...r?p:{},tabIndex:c?void 0:0,ref:N,style:S,className:(0,o.cn)("focus-visible:ring-ring focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden",{"touch-none select-none":r,"cursor-default":g.flatCursor,"data-dragging:cursor-grabbing":!g.flatCursor,"cursor-grab":!y&&r&&!g.flatCursor,"opacity-50":y,"pointer-events-none opacity-50":c},d)})})});U.displayName=_;let q=s.forwardRef((e,t)=>{let{asChild:a,disabled:l,className:r,...i}=e,c=s.useContext(G);if(!c)throw Error(W[B]);let d=J(B),u=null!=l?l:c.disabled,m=P(t,e=>{u&&c.setActivatorNodeRef(e)}),x=a?A.DX:"button";return(0,n.jsx)(x,{type:"button","aria-controls":c.id,"data-dragging":c.isDragging?"":void 0,...i,...c.attributes,...c.listeners,ref:m,className:(0,o.cn)("select-none disabled:pointer-events-none disabled:opacity-50",d.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",r),disabled:u})});q.displayName=B;let X=s.createContext(!1);X.displayName=K;let Y={sideEffects:(0,R.WB)({styles:{active:{opacity:"0.4"}}})};function Q(e){var t;let{container:a,children:l,...r}=e,i=J(K),[c,d]=s.useState(!1);s.useLayoutEffect(()=>d(!0),[]);let u=null!=a?a:c?null==(t=globalThis.document)?void 0:t.body:null;return u?E.createPortal((0,n.jsx)(R.Hd,{dropAnimation:Y,modifiers:i.modifiers,className:(0,o.cn)(!i.flatCursor&&"cursor-grabbing"),...r,children:(0,n.jsx)(X.Provider,{value:!0,children:i.activeId?"function"==typeof l?l({value:i.activeId}):l:null})}),u):null}let ee=["backspace","delete"];function et(e){let{table:t,...a}=e,l=s.useId(),r=s.useId(),i=s.useId(),[c,d]=s.useState(!1),m=s.useRef(null),x=t.getState().sorting,g=t.setSorting,{columnLabels:h,columns:f}=s.useMemo(()=>{let e=new Map,a=new Set(x.map(e=>e.id)),n=[];for(let r of t.getAllColumns()){var s,l;if(!r.getCanSort())continue;let t=null!=(l=null==(s=r.columnDef.meta)?void 0:s.label)?l:r.id;e.set(r.id,t),a.has(r.id)||n.push({id:r.id,label:t})}return{columnLabels:e,columns:n}},[x,t]),p=s.useCallback(()=>{let e=f[0];e&&g(t=>[...t,{id:e.id,desc:!1}])},[f,g]),b=s.useCallback((e,t)=>{g(a=>a?a.map(a=>a.id===e?{...a,...t}:a):a)},[g]),v=s.useCallback(e=>{g(t=>t.filter(t=>t.id!==e))},[g]),j=s.useCallback(()=>g(t.initialState.sorting),[g,t.initialState.sorting]);s.useEffect(()=>{function e(e){!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&("s"!==e.key.toLowerCase()||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),d(!0)),"s"===e.key.toLowerCase()&&e.shiftKey&&x.length>0&&(e.preventDefault(),j()))}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[x.length,j]);let w=s.useCallback(e=>{ee.includes(e.key.toLowerCase())&&x.length>0&&(e.preventDefault(),j())},[x.length,j]);return(0,n.jsxs)(Z,{value:x,onValueChange:g,getItemValue:e=>e.id,children:[(0,n.jsxs)(k.AM,{open:c,onOpenChange:d,children:[(0,n.jsx)(k.Wv,{asChild:!0,children:(0,n.jsxs)(u.$,{variant:"outline",size:"sm",onKeyDown:w,children:[(0,n.jsx)(N.A,{}),"Sort",x.length>0&&(0,n.jsx)(C.E,{variant:"default",className:"h-[18.24px] rounded-[3.2px] px-[5.12px] font-mono text-[10.4px] font-normal",children:x.length})]})}),(0,n.jsxs)(k.hl,{"aria-labelledby":r,"aria-describedby":i,className:"flex w-full max-w-[var(--radix-popover-content-available-width)] origin-[var(--radix-popover-content-transform-origin)] flex-col gap-3.5 p-4 sm:min-w-[380px]",...a,children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("h4",{id:r,className:"leading-none font-medium",children:x.length>0?"Sort by":"No sorting applied"}),(0,n.jsx)("p",{id:i,className:(0,o.cn)("text-muted-foreground text-sm",x.length>0&&"sr-only"),children:x.length>0?"Modify sorting to organize your rows.":"Add sorting to organize your rows."})]}),x.length>0&&(0,n.jsx)(H,{asChild:!0,children:(0,n.jsx)("div",{role:"list",className:"flex max-h-[300px] flex-col gap-2 overflow-y-auto p-1",children:x.map(e=>(0,n.jsx)(ea,{sort:e,sortItemId:"".concat(l,"-sort-").concat(e.id),columns:f,columnLabels:h,onSortUpdate:b,onSortRemove:v},e.id))})}),(0,n.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,n.jsx)(u.$,{size:"sm",className:"rounded",ref:m,onClick:p,disabled:0===f.length,children:"Add sort"}),x.length>0&&(0,n.jsx)(u.$,{variant:"outline",size:"sm",className:"rounded",onClick:j,children:"Reset sorting"})]})]})]}),(0,n.jsx)(Q,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"bg-primary/10 h-8 w-[180px] rounded-sm"}),(0,n.jsx)("div",{className:"bg-primary/10 h-8 w-24 rounded-sm"}),(0,n.jsx)("div",{className:"bg-primary/10 size-8 shrink-0 rounded-sm"}),(0,n.jsx)("div",{className:"bg-primary/10 size-8 shrink-0 rounded-sm"})]})})]})}function ea(e){let{sort:t,sortItemId:a,columnLabels:l,onSortUpdate:r,onSortRemove:i}=e,o="".concat(a,"-field-listbox"),c="".concat(a,"-field-trigger"),d="".concat(a,"-direction-listbox"),[m,x]=s.useState(!1),[h,f]=s.useState(!1),p=s.useCallback(e=>{!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&(m||h||ee.includes(e.key.toLowerCase())&&(e.preventDefault(),i(t.id)))},[t.id,m,h,i]);return(0,n.jsx)(U,{value:t.id,asChild:!0,children:(0,n.jsxs)("div",{role:"listitem",id:a,tabIndex:-1,className:"flex items-center gap-2",onKeyDown:p,children:[(0,n.jsx)(k.AM,{open:m,onOpenChange:x,children:(0,n.jsx)(k.Wv,{asChild:!0,children:(0,n.jsxs)(u.$,{id:c,role:"combobox","aria-controls":o,variant:"outline",size:"sm",className:"w-44 justify-between rounded font-normal",children:[(0,n.jsx)("span",{className:"truncate",children:l.get(t.id)}),(0,n.jsx)(v.TBE,{className:"opacity-50"})]})})}),(0,n.jsxs)(b.l6,{open:h,onOpenChange:f,value:t.desc?"desc":"asc",onValueChange:e=>r(t.id,{desc:"desc"===e}),children:[(0,n.jsx)(b.bq,{"aria-controls":d,className:"h-8 w-24 rounded [&[data-size]]:h-8",children:(0,n.jsx)(b.yv,{})}),(0,n.jsx)(b.gC,{id:d,className:"min-w-[var(--radix-select-trigger-width)] origin-[var(--radix-select-content-transform-origin)]",children:g.sortOrders.map(e=>(0,n.jsx)(b.eb,{value:e.value,children:e.label},e.value))})]}),(0,n.jsx)(u.$,{"aria-controls":a,variant:"outline",size:"icon",className:"size-8 shrink-0 rounded",onClick:()=>i(t.id),children:(0,n.jsx)(S.A,{})}),(0,n.jsx)(q,{asChild:!0,children:(0,n.jsx)(u.$,{variant:"outline",size:"icon",className:"size-8 shrink-0 rounded",children:(0,n.jsx)(v.YtH,{})})})]})})}var en=a(2346),es=a(6102),el=a(4631),er=a(5084),ei=a(8192);function eo(e){var t;let{table:a,visible:l,container:r,children:i,className:c,...d}=e,[u,m]=s.useState(!1);s.useLayoutEffect(()=>{m(!0)},[]),s.useEffect(()=>{function e(e){"Escape"===e.key&&a.toggleAllRowsSelected(!1)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a]);let x=null!=r?r:u?null==(t=globalThis.document)?void 0:t.body:null;if(!x)return null;let g=null!=l?l:a.getFilteredSelectedRowModel().rows.length>0;return E.createPortal((0,n.jsx)(er.N,{children:g&&(0,n.jsx)(ei.P.div,{role:"toolbar","aria-orientation":"horizontal",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2,ease:"easeInOut"},className:(0,o.cn)("bg-background text-foreground fixed inset-x-0 bottom-6 z-50 mx-auto flex w-fit flex-wrap items-center justify-center gap-2 rounded-md border p-2 shadow-sm",c),...d,children:i})}),x)}function ec(e){let{size:t="sm",tooltip:a,isPending:s,disabled:l,className:r,children:i,...c}=e,d=(0,n.jsx)(u.$,{variant:"secondary",size:t,className:(0,o.cn)("border-secondary bg-secondary/50 hover:bg-secondary/70 gap-1.5 border [&>svg]:size-3.5","icon"===t?"size-7":"h-7",r),disabled:l||s,...c,children:s?(0,n.jsx)(el.A,{className:"animate-spin"}):i});return a?(0,n.jsxs)(es.m_,{children:[(0,n.jsx)(es.k$,{asChild:!0,children:d}),(0,n.jsx)(es.ZI,{sideOffset:6,className:"bg-accent text-foreground border font-semibold dark:bg-zinc-900 [&>span]:hidden",children:(0,n.jsx)("p",{children:a})})]}):d}function ed(e){let{table:t}=e,a=s.useCallback(()=>{t.toggleAllRowsSelected(!1)},[t]);return(0,n.jsxs)("div",{className:"flex h-7 items-center rounded-md border pr-1 pl-2.5",children:[(0,n.jsxs)("span",{className:"text-xs whitespace-nowrap",children:[t.getFilteredSelectedRowModel().rows.length," selected"]}),(0,n.jsx)(en.Separator,{orientation:"vertical",className:"mr-1 ml-2 data-[orientation=vertical]:h-4"}),(0,n.jsxs)(es.m_,{children:[(0,n.jsx)(es.k$,{asChild:!0,children:(0,n.jsx)(u.$,{variant:"ghost",size:"icon",className:"size-5",onClick:a,children:(0,n.jsx)(v.MKb,{className:"size-3.5"})})}),(0,n.jsxs)(es.ZI,{sideOffset:10,className:"bg-accent text-foreground flex items-center gap-2 border px-2 py-1 font-semibold dark:bg-zinc-900 [&>span]:hidden",children:[(0,n.jsx)("p",{children:"Clear selection"}),(0,n.jsx)("kbd",{className:"bg-background text-foreground rounded border px-1.5 py-px font-mono text-[0.7rem] font-normal shadow-xs select-none",children:(0,n.jsx)("abbr",{title:"Escape",className:"no-underline",children:"Esc"})})]})]})]})}var eu=a(3977),em=a(6981),ex=a(5196);function eg(e){let{className:t,...a}=e;return(0,n.jsx)(em.bL,{"data-slot":"checkbox",className:(0,o.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,n.jsx)(em.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,n.jsx)(ex.A,{className:"size-3.5"})})})}var eh=a(772),ef=a(8395);let ep=e=>(0,n.jsx)("div",{className:"flex h-8 items-center justify-center gap-1",children:e}),eb=[{id:"txid",accessorKey:"txid",title:"Txid",formatter:e=>e.slice(0,4)+"..."+e.slice(-4),meta:{label:"txid",placeholder:"Search by txid",variant:"text",icon:ef.A},enableSorting:!1,enableColumnFilter:!0},{id:"feeRate",accessorKey:"feeRate",title:"FeeRate (sat/vB)",formatter:e=>e.toPrecision(4),meta:{label:"Fee Rate",variant:"range",range:[0,1e3]},enableSorting:!0,enableColumnFilter:!0},{id:"vsize",accessorKey:"vsize",title:"Size (vB)",formatter:e=>e,meta:{label:"vsize",variant:"range",range:[0,1e6]},enableSorting:!0,enableColumnFilter:!0},{id:"fees.base",accessorKey:"fees.base",title:"Base Fee (sat)",formatter:e=>e.toLocaleString(),meta:{label:"Base Fee",variant:"range",range:[0,1e6]},enableSorting:!0,enableColumnFilter:!0},{id:"depends",accessorKey:"depends",title:"Depends On",formatter:e=>e.length,meta:{label:"Depends On",variant:"number"},enableSorting:!0,enableColumnFilter:!0,filterFn:(e,t,a)=>e.getValue(t).length===Number(a)},{id:"descendant_count",accessorKey:"descendant_count",title:"Descendant Count",formatter:e=>e,enableSorting:!0,enableColumnFilter:!0},{id:"descendant_size",accessorKey:"descendant_size",title:"Descendant Size",formatter:e=>e,enableSorting:!0,enableColumnFilter:!0},{id:"ancestor_count",accessorKey:"ancestor_count",title:"Ancestor Count",formatter:e=>e,enableSorting:!0,enableColumnFilter:!0},{id:"ancestor_size",accessorKey:"ancestor_size",title:"Ancestor Size",formatter:e=>e,enableSorting:!0,enableColumnFilter:!0},{id:"time",accessorKey:"time",title:"Time",formatter:e=>new Date(1e3*e).toLocaleString(),enableSorting:!0,enableColumnFilter:!0},{id:"height",accessorKey:"height",title:"Height",formatter:e=>e,enableSorting:!0,enableColumnFilter:!0},{id:"bip125_replaceable",accessorKey:"bip125_replaceable",title:"BIP125 Replaceable",formatter:e=>(0,n.jsx)(eg,{checked:e,disabled:!0}),meta:{label:"BIP125 Replaceable",variant:"boolean"},enableSorting:!0,enableColumnFilter:!0}],ev=[{id:"select",header:e=>{let{table:t}=e;return(0,n.jsx)(eg,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:t}=e;return(0,n.jsx)(eg,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"})},meta:{label:"Checkbox",placeholder:"select transaction",variant:"text",icon:ef.A},size:32,enableHiding:!1},...eb.map(e=>({id:e.id,accessorKey:e.accessorKey,header:t=>{let{column:a}=t;return(0,n.jsx)(eh.w,{column:a,title:e.title,className:"w-full justify-center"})},cell:t=>{let{cell:a}=t;return ep(e.formatter(a.getValue()))},...e.meta&&{meta:e.meta},enableSorting:e.enableSorting,enableColumnFilter:e.enableColumnFilter,...e.filterFn&&{filterFn:e.filterFn}}))],ej=[{id:"select",cell:e=>{let{row:t}=e;return(0,n.jsx)(eg,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"})},meta:{label:"Checkbox",placeholder:"deselect transaction",variant:"text",icon:ef.A},size:32,enableHiding:!1},...ev.slice(1,5)];var ew=a(4382),ey=a(1032),eN=a(4944);function eS(e){let{isOpen:t,selectedData:a,handleModal:l}=e,r=s.useMemo(()=>{if(0===a.length)return{totalTransactions:0,totalVirtualSize:0,totalWeight:0,totalFees:0,averageFeeRate:0,maxAncestorCount:0,maxDescendantCount:0};let e=a.length,t=a.reduce((e,t)=>e+t.vsize,0),n=a.reduce((e,t)=>e+(t.weight||4*t.vsize),0),s=a.reduce((e,t)=>e+t.fees.base,0);return{totalTransactions:e,totalVirtualSize:t,totalWeight:n,totalFees:s,averageFeeRate:t>0?s/t:0,maxAncestorCount:Math.max(...a.map(e=>e.ancestor_count)),maxDescendantCount:Math.max(...a.map(e=>e.descendant_count))}},[a]),i=r.totalWeight/4e6*100;return(0,n.jsx)(ew.a,{title:"Transaction Summary",description:"Aggregate statistics for selected transactions",isOpen:t,onClose:()=>l(!1),size:"4xl",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{className:"pb-2",children:(0,n.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Transactions"})}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[r.totalTransactions,(0,n.jsx)("span",{className:"text-muted-foreground ml-1 text-sm font-normal",children:"txs"})]})})]}),(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{className:"pb-2",children:(0,n.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Virtual Size"})}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[r.totalVirtualSize,(0,n.jsx)("span",{className:"text-muted-foreground ml-1 text-sm font-normal",children:"vbytes"})]})})]}),(0,n.jsxs)(d.Zp,{children:[(0,n.jsxs)(d.aR,{className:"pb-2",children:[(0,n.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Weight"}),(0,n.jsxs)(d.BT,{children:[i.toFixed(2),"% of max block weight"]})]}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[r.totalWeight,(0,n.jsxs)("span",{className:"text-muted-foreground ml-1 text-sm font-normal",children:["/ ",4e6]})]}),(0,n.jsx)(eN.k,{value:Math.min(i,100),className:"h-2"})]})})]}),(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{className:"pb-2",children:(0,n.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Fees"})}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[(r.totalFees/1e8).toFixed(8),(0,n.jsx)("span",{className:"text-muted-foreground ml-1 text-sm font-normal",children:"BTC"})]}),(0,n.jsxs)("div",{className:"text-muted-foreground text-sm",children:[r.totalFees," sats"]})]})})]}),(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{className:"pb-2",children:(0,n.jsx)(d.ZB,{className:"text-sm font-medium",children:"Average Fee Rate"})}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[r.averageFeeRate.toFixed(1),(0,n.jsx)("span",{className:"text-muted-foreground ml-1 text-sm font-normal",children:"sat/vB"})]})})]}),(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{className:"pb-2",children:(0,n.jsx)(d.ZB,{className:"text-sm font-medium",children:"Chain Metrics"})}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground text-sm",children:"Max Ancestors:"}),(0,n.jsx)(C.E,{variant:"secondary",children:r.maxAncestorCount})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground text-sm",children:"Max Descendants:"}),(0,n.jsx)(C.E,{variant:"secondary",children:r.maxDescendantCount})]})]})})]})]}),r.totalTransactions>0&&(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{children:(0,n.jsx)(d.ZB,{className:"text-lg",children:"Additional Details"})}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 text-sm md:grid-cols-2",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Average tx size:"}),(0,n.jsxs)("span",{children:[(r.totalVirtualSize/r.totalTransactions).toFixed(0)," ","vbytes"]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Average tx weight:"}),(0,n.jsxs)("span",{children:[(r.totalWeight/r.totalTransactions).toFixed(0)," ","weight units"]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Average fee per tx:"}),(0,n.jsxs)("span",{children:[(r.totalFees/r.totalTransactions).toFixed(0)," ","sats"]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Block space usage:"}),(0,n.jsxs)("span",{children:[i.toFixed(4),"%"]})]})]})]})})]})]})})}var eC=a(6844),ek=a(2486);function eR(e){let{isOpen:t,selectedData:a,parentTable:l,handleModal:r}=e,[i,o]=s.useState(0),[c,d]=s.useState(10),[x,g]=s.useState([]),[h,f]=s.useState(!1),{declareJob:p,isLoading:b,currentTemplateId:v}=(0,eC.Ou)(),j=async()=>{let e=a.map(e=>e.txid);await p(e)&&(l.toggleAllRowsSelected(!1),setTimeout(()=>r(!1),1e3))},N=s.useMemo(()=>ej.map(e=>"select"===e.id?{...e,cell:e=>{var t;let{row:a}=e;return(0,n.jsx)(eg,{checked:null==(t=l.getRow(a.original.txid))?void 0:t.getIsSelected(),onCheckedChange:e=>{var t;return null==(t=l.getRow(a.original.txid))?void 0:t.toggleSelected(!!e)},"aria-label":"Select row"})}}:e),[l]),S=(0,m.N4)({data:a,columns:N,state:{pagination:{pageIndex:i,pageSize:c},sorting:x},onPaginationChange:e=>{if("function"==typeof e){let t=e({pageIndex:i,pageSize:c});o(t.pageIndex),d(t.pageSize)}else o(e.pageIndex),d(e.pageSize)},onSortingChange:g,getCoreRowModel:(0,ey.HT)(),getPaginationRowModel:(0,ey.kW)(),getSortedRowModel:(0,ey.h5)()});return(0,n.jsxs)(ew.a,{title:"Selected Transactions",description:"Review the selected transactions",isOpen:t,onClose:()=>r(!1),size:"6xl",children:[(0,n.jsx)("div",{className:"max-h-[75vh] overflow-auto",children:(0,n.jsx)(w,{table:S,children:(0,n.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2",children:[(0,n.jsx)(y.w,{table:S}),(0,n.jsx)(et,{table:S}),a.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.$,{variant:v?"default":"secondary",size:"sm",onClick:j,disabled:!v||b,children:[(0,n.jsx)(ek.A,{className:"h-4 w-4"}),b?"Declaring...":"Declare Job"]}),(0,n.jsx)(u.$,{variant:"outline",size:"sm",onClick:()=>f(!0),children:"Summary"}),(0,n.jsx)(u.$,{variant:"destructive",size:"sm",onClick:()=>{l.toggleAllRowsSelected(!1),setTimeout(()=>r(!1),800)},children:"Deselect All"})]})]})})}),(0,n.jsx)(eS,{isOpen:h,selectedData:a,handleModal:f})]})}var eD=a(2657),ez=a(2713),eF=a(4357),eA=a(1788);function eT(e){let{data:t,isFetching:a,onToggle:l}=e,[r,c]=s.useState(!1),[m,x]=s.useState(!1),[g,h]=s.useState(!1),[f,p]=s.useState(!1),{declareJob:b,isLoading:v,currentTemplateId:j}=(0,eC.Ou)(),{table:N}=(0,eu.u)({data:t,columns:ev,getRowId:e=>e.txid}),S=N.getSelectedRowModel().rows,C=s.useMemo(()=>S.map(e=>e.original),[S]),k=e=>{e?(c(!0),a&&l()):(c(!1),a||l())},R=async()=>{h(!0);try{await (0,o.vD)(C)}catch(e){i.oR.error("Export failed: There was an error exporting the selected transactions: ")}finally{h(!1)}},D=async()=>{p(!0);try{await (0,o.qJ)(C)}catch(e){i.oR.error("Copy failed: There was an error copying the selected transaction IDs.")}finally{p(!1)}},z=async()=>{let e=C.map(e=>e.txid);await b(e)&&N.toggleAllRowsSelected(!1)},F=(0,n.jsxs)(eo,{table:N,className:"rounded-xl p-4",children:[(0,n.jsx)(ed,{table:N}),(0,n.jsxs)(ec,{tooltip:j?"Declare job with selected transactions (Template ID: ".concat(j,")"):"Wait for template notification to declare job",onClick:z,isPending:v,children:[(0,n.jsx)(ek.A,{}),"Declare Job"]}),(0,n.jsxs)(ec,{tooltip:"View selected transactions",onClick:()=>k(!0),children:[(0,n.jsx)(eD.A,{}),"View Selected"]}),(0,n.jsxs)(ec,{tooltip:"Show summary of selected transactions",onClick:()=>x(!0),children:[(0,n.jsx)(ez.A,{}),"Summary"]}),(0,n.jsxs)(ec,{tooltip:"Copy transaction IDs to clipboard",onClick:D,isPending:f,children:[(0,n.jsx)(eF.A,{}),"Copy IDs"]}),(0,n.jsxs)(ec,{tooltip:"Export selected transactions to CSV",onClick:R,isPending:g,children:[(0,n.jsx)(eA.A,{}),"Export"]})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Zp,{children:(0,n.jsx)("div",{className:"px-4",children:(0,n.jsx)(w,{table:N,actionBar:F,children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(y.w,{table:N}),(0,n.jsx)(u.$,{variant:a?"destructive":"default",size:"sm",onClick:l,children:a?"Pause":"Resume"}),(0,n.jsx)(et,{table:N})]})})})}),(0,n.jsx)(eS,{isOpen:m,selectedData:C,handleModal:x}),(0,n.jsx)(eR,{isOpen:r,selectedData:C,parentTable:N,handleModal:k})]})}function eI(){let{transactions:e,isFetching:t,toggle:a}=function(){let[e,t]=s.useState([]),[a,n]=s.useState([]),[c,d]=s.useState(!0),u=s.useRef(c),m=s.useRef(null);return s.useEffect(()=>{l.A.get("http://localhost:3001/api/mempool").then(e=>{t(e.data.map(e=>({...(0,o.FS)(e),feeRate:1e8*e.fees.base/e.vsize})))}).catch(()=>{})},[]),s.useEffect(()=>{u.current=c},[c]),s.useEffect(()=>{let e=new r.A("ws://localhost:3001/ws/bitcoin/stream");return m.current=e,e.onmessage=e=>{let a=JSON.parse(e.data);switch(a.event){case"A":let s={...(0,o.FS)(a.transaction),feeRate:1e8*a.transaction.fees.base/a.transaction.vsize};u.current?t(e=>[s,...e.filter(e=>e.txid!==s.txid)]):n(e=>[s,...e.filter(e=>e.txid!==s.txid)]);break;case"R":t(e=>e.filter(e=>e.txid!==a.txid)),n(e=>e.filter(e=>e.txid!==a.txid));break;case"C":let l=a.block.block_hash.slice(0,10)+"...",r=a.block.height,c=a.block.txids.length-1;i.oR.success("Block #".concat(r," Mined"),{description:"".concat(c," transactions confirmed in block ").concat(l),action:{label:"View Block",onClick:()=>window.open("https://mempool.space/block/".concat(a.block.block_hash),"_blank")}});let d=new Set(a.block.txids);t(e=>e.filter(e=>!d.has(e.txid))),n(e=>e.filter(e=>!d.has(e.txid)));break;case"D":let m=a.block_hash.slice(0,8)+"...";i.oR.warning("\uD83D\uDD04 Chain Reorganization",{description:"Block ".concat(m," disconnected, ").concat(a.transactions.length," txs back to mempool"),action:{label:"View Block",onClick:()=>window.open("https://mempool.space/block/".concat(a.block_hash),"_blank")}});let x=a.transactions.map(e=>({...(0,o.FS)(e),feeRate:1e8*e.fees.base/e.vsize})),g=e=>{let t=new Set(e.map(e=>e.txid));return[...e,...x.filter(e=>!t.has(e.txid))]};u.current?t(g):n(g)}},()=>{e.close(),m.current=null}},[]),s.useEffect(()=>{c&&a.length>0&&(t(e=>{let t=new Set(e.map(e=>e.txid));return[...e,...a.filter(e=>!t.has(e.txid))]}),n([]))},[c,a]),{transactions:e,isFetching:c,toggle:()=>d(e=>!e)}}(),[d]=(0,c.ZA)("txid",c.tU.withDefault("")),u=s.useMemo(()=>e.filter(e=>!d||e.txid.toLowerCase().includes(d.toLowerCase())),[e,d]);return(0,n.jsx)("div",{className:"data-table-container",children:(0,n.jsx)(eT,{data:u,isFetching:t,onToggle:a})})}},4944:(e,t,a)=>{"use strict";a.d(t,{k:()=>r});var n=a(5155);a(2115);var s=a(5863),l=a(9434);function r(e){let{className:t,value:a,...r}=e;return(0,n.jsx)(s.bL,{"data-slot":"progress",className:(0,l.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:(0,n.jsx)(s.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},5127:(e,t,a)=>{"use strict";a.d(t,{Table:()=>l,TableBody:()=>i,TableCell:()=>d,TableHead:()=>c,TableHeader:()=>r,TableRow:()=>o});var n=a(5155);a(2115);var s=a(9434);function l(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",t),...a})})}function r(e){let{className:t,...a}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",t),...a})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},6102:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>r,ZI:()=>c,k$:()=>o,m_:()=>i});var n=a(5155);a(2115);var s=a(9613),l=a(9434);function r(e){let{delayDuration:t=0,...a}=e;return(0,n.jsx)(s.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function i(e){let{...t}=e;return(0,n.jsx)(r,{children:(0,n.jsx)(s.bL,{"data-slot":"tooltip",...t})})}function o(e){let{...t}=e;return(0,n.jsx)(s.l9,{"data-slot":"tooltip-trigger",...t})}function c(e){let{className:t,sideOffset:a=0,children:r,...i}=e;return(0,n.jsx)(s.ZL,{children:(0,n.jsxs)(s.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,l.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[r,(0,n.jsx)(s.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},6550:(e,t,a)=>{Promise.resolve().then(a.bind(a,478))},6844:(e,t,a)=>{"use strict";a.d(t,{Ou:()=>u,X1:()=>o,g0:()=>d});var n=a(5155),s=a(2115),l=a(1320),r=a(6671);let i=(0,s.createContext)(void 0);function o(e){let{children:t,wsUrl:a="ws://localhost:3001/ws/jd/stream"}=e,[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),g=(0,s.useRef)(null),h=(0,s.useCallback)(e=>{c(t=>[e,...t].slice(0,100))},[]);(0,s.useEffect)(()=>{let e=new l.A(a);return g.current=e,e.onopen=()=>{h({event:"WebSocketOpen",timestamp:new Date().toLocaleString(),level:"INFO",message:"Connected to job declaration stream"})},e.onmessage=e=>{try{let t=JSON.parse(e.data),a={event:t.event,timestamp:new Date(1e3*t.timestamp).toLocaleString(),level:"INFO",message:t.message};h(a),"NewTemplate"===t.event?u(t.template_id):u(null),r.oR.info(t.event,{description:t.message,action:"NewTemplate"===t.event?{label:"Select Transactions",onClick:()=>{let e=document.querySelector(".data-table-container");e&&e.scrollIntoView({behavior:"smooth"})}}:void 0,duration:1e4})}catch(e){console.error("JobDeclarationProvider: Failed to parse WebSocket message:",e),h({event:"WebSocketParseError",timestamp:new Date().toLocaleString(),level:"ERROR",message:"Failed to parse WebSocket message: ".concat(e instanceof Error?e.message:"Unknown error")})}},e.onerror=e=>{h({event:"WebSocketError",timestamp:new Date().toLocaleString(),level:"ERROR",message:"WebSocket connection error"})},e.onclose=()=>{h({event:"WebSocketClose",timestamp:new Date().toLocaleString(),level:"WARNING",message:"Disconnected from job declaration stream"})},()=>{g.current&&(g.current.close(),g.current=null)}},[a,h]);let f=(0,s.useCallback)(async e=>{if(!d)return r.oR.error("No template available",{description:"Please wait for a new template notification before declaring a job."}),!1;if(0===e.length)return r.oR.error("No transactions selected",{description:"Please select at least one transaction to declare a job."}),!1;x(!0);try{let t=await fetch("http://localhost:3001/api/job-declaration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_id:d,txids:e})}),a=await t.json();if(a.success){r.oR.success("Job Declaration Successful!",{description:"Successfully declared job with ".concat(e.length," transactions for template ").concat(d,".")});let t={event:"JobDeclarationSuccess",timestamp:new Date().toLocaleString(),level:"INFO",message:"Job declared successfully with ".concat(e.length," transactions (template_id: ").concat(d,")")};return h(t),!0}{r.oR.error("Job Declaration Failed",{description:a.message||"An unknown error occurred."});let e={event:"JobDeclarationError",timestamp:new Date().toLocaleString(),level:"ERROR",message:"Job declaration failed: ".concat(a.message||"Unknown error")};return h(e),!1}}catch(t){let e=t instanceof Error?t.message:"Network error";return r.oR.error("Job Declaration Failed",{description:"Failed to declare job: ".concat(e)}),h({event:"JobDeclarationError",timestamp:new Date().toLocaleString(),level:"ERROR",message:"Job declaration failed: ".concat(e)}),!1}finally{x(!1)}},[d,h]);return(0,n.jsx)(i.Provider,{value:{logs:o,currentTemplateId:d,declareJob:f,isLoading:m,addLog:h},children:t})}function c(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useJobDeclaration must be used within a JobDeclarationProvider");return e}function d(){let{logs:e,addLog:t}=c();return{logs:e,addLog:t}}function u(){let{currentTemplateId:e,declareJob:t,isLoading:a}=c();return{currentTemplateId:e,declareJob:t,isLoading:a}}}},e=>{var t=t=>e(e.s=t);e.O(0,[105,277,671,690,428,904,613,320,541,890,687,871,441,684,358],()=>t(6550)),_N_E=e.O()}]);